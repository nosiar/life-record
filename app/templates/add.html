{% extends "base.html" %}

{% block script %}
$(function() {
  $("#item").autocomplete({
    source: function(request, response){
      $.getJSON("{{url_for('get_items')}}",{
        q: request.term,
      }, function(data) {
        response(data.matching_results);
      });
    },
    minLength: 1,
    select: function(event, ui){
      //$("#log").text(ui.item.value);
    }
  });
  $("#category").autocomplete({
    source: function(request, response){
      $.getJSON("{{url_for('get_categories')}}",{
        q: request.term,
      }, function(data) {
        response(data.matching_results);
      });
    },
    minLength: 1,
    select: function(event, ui){
    }
  });
});
{% endblock %}

{% block content %}
<form action="" method="POST">
  {{ form.hidden_tag() }}
  {{ form.item }}
  {{ form.category }}
  {{ form.start }}
  <input type="submit">
</form>
<div id="log">{{ message }}</div>
{% endblock %}
